# Python 的浅拷贝与深拷贝

## 1. 浅拷贝

- 重新分配一块内存，创建一个新的对象
- 但是新对象里的元素是原对象中子对象的引用
- 若原对象中的元素可变，会影响到新对象，例如：

```python
import copy

l1 = [1, [2, 3], (4, 5)]
# 以下三种方式皆是 l2 是 l1 的浅拷贝，效果一样
# l2 = list(l1)
# l2 = l1[:]
l2 = copy.copy(l1)

l1[1].append(6) # 列表是可变的
l1.append(7)

l1
# [1, [2, 3, 6], (4, 5), 7]

l2
# [1, [2, 3, 6], (4, 5)]

l1[2] += (8, 9) # 元组是不可变的，这里是重新又创建了一个新元组

l1
# [1, [2, 3, 6], (4, 5, 8, 9), 7]

l2
# [1, [2, 3, 6], (4, 5)]
```

## 2. 深拷贝

- 重新分配一块内存，创建一个新的对象
- 将原对象中的元素，以递归的方式，通过创建新的子对象拷贝到新对象中
- 新对象和原对象**没有任何关联**
- Python 中以 copy.deepcopy() 来实现对象的深度拷贝，例子如下：

```python
import copy

l1 = [1, [2, 3], (4, 5)]
l2 = copy.deepcopy(l1)

l1.append(6)
l1[1].append(7)
l1[2] += (8,)

l1
# [1, [2, 3, 7], (4, 5, 8), 6]

l2
# [1, [2, 3], (4, 5)]
```

可以看到，l1 发生的任何变化，都不会影响到 l2，l1 和 l2 是完全独立的。